{
   "annotations" : {
      "list" : [
         {
            "builtIn" : 1,
            "datasource" : {
               "type" : "grafana",
               "uid" : "-- Grafana --"
            },
            "enable" : true,
            "hide" : true,
            "iconColor" : "rgba(0, 211, 255, 1)",
            "name" : "Annotations & Alerts",
            "type" : "dashboard"
         },
         {
            "datasource" : {
               "type" : "prometheus",
               "uid" : "prometheus"
            },
            "enable" : true,
            "expr" : "slurmjob_annotations{jobid=\"$jobid\"}",
            "iconColor" : "red",
            "name" : "User Annotations",
            "titleFormat" : "{{marker}}"
         }
      ]
   },
   "editable" : true,
   "fiscalYearStartMonth" : 0,
   "graphTooltip" : 0,
   "id" : 40,
   "links" : [],
   "liveNow" : false,
   "panels" : [
      {
         "collapsed" : false,
         "gridPos" : {
            "h" : 1,
            "w" : 24,
            "x" : 0,
            "y" : 0
         },
         "id" : 35,
         "panels" : [],
         "title" : "Summary Info",
         "type" : "row"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "color" : {
                  "mode" : "thresholds"
               },
               "mappings" : [],
               "thresholds" : {
                  "mode" : "absolute",
                  "steps" : [
                     {
                        "color" : "text",
                        "value" : null
                     }
                  ]
               }
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 3,
            "w" : 2,
            "x" : 0,
            "y" : 1
         },
         "id" : 9,
         "options" : {
            "colorMode" : "value",
            "graphMode" : "area",
            "justifyMode" : "auto",
            "orientation" : "auto",
            "reduceOptions" : {
               "calcs" : [
                  "lastNotNull"
               ],
               "fields" : "",
               "values" : false
            },
            "showPercentChange" : false,
            "text" : {
               "valueSize" : 30
            },
            "textMode" : "auto",
            "wideLayout" : true
         },
         "pluginVersion" : "10.4.0-66861",
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "exemplar" : false,
               "expr" : "$jobid",
               "instant" : true,
               "legendFormat" : "__auto",
               "range" : false,
               "refId" : "A"
            }
         ],
         "title" : "Job Id",
         "type" : "stat"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "color" : {
                  "mode" : "thresholds"
               },
               "mappings" : [],
               "thresholds" : {
                  "mode" : "absolute",
                  "steps" : [
                     {
                        "color" : "green",
                        "value" : null
                     }
                  ]
               }
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 3,
            "w" : 4,
            "x" : 2,
            "y" : 1
         },
         "id" : 10,
         "options" : {
            "colorMode" : "value",
            "graphMode" : "area",
            "justifyMode" : "auto",
            "orientation" : "auto",
            "reduceOptions" : {
               "calcs" : [
                  "lastNotNull"
               ],
               "fields" : "/^user$/",
               "values" : false
            },
            "showPercentChange" : false,
            "text" : {
               "valueSize" : 30
            },
            "textMode" : "auto",
            "wideLayout" : true
         },
         "pluginVersion" : "10.4.0-66861",
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "disableTextWrap" : false,
               "editorMode" : "builder",
               "exemplar" : false,
               "expr" : "slurmjob_info{jobid=\"$jobid\"}",
               "fullMetaSearch" : false,
               "includeNullMetadata" : true,
               "instant" : false,
               "legendFormat" : "__auto",
               "range" : true,
               "refId" : "A",
               "useBackend" : false
            }
         ],
         "title" : "User",
         "transformations" : [
            {
               "id" : "labelsToFields",
               "options" : {}
            },
            {
               "id" : "merge",
               "options" : {}
            },
            {
               "disabled" : true,
               "id" : "joinByField",
               "options" : {
                  "mode" : "inner"
               }
            }
         ],
         "type" : "stat"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "color" : {
                  "mode" : "thresholds"
               },
               "mappings" : [
                  {
                     "options" : {
                        "0" : {
                           "color" : "blue",
                           "index" : 0,
                           "text" : "interactive"
                        },
                        "1" : {
                           "index" : 1,
                           "text" : "batch"
                        }
                     },
                     "type" : "value"
                  }
               ],
               "thresholds" : {
                  "mode" : "absolute",
                  "steps" : [
                     {
                        "color" : "green",
                        "value" : null
                     },
                     {
                        "color" : "red",
                        "value" : 80
                     }
                  ]
               }
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 3,
            "w" : 4,
            "x" : 6,
            "y" : 1
         },
         "id" : 36,
         "options" : {
            "colorMode" : "value",
            "graphMode" : "none",
            "justifyMode" : "auto",
            "orientation" : "auto",
            "reduceOptions" : {
               "calcs" : [
                  "lastNotNull"
               ],
               "fields" : "/^batchflag$/",
               "values" : false
            },
            "showPercentChange" : false,
            "text" : {
               "valueSize" : 30
            },
            "textMode" : "auto",
            "wideLayout" : true
         },
         "pluginVersion" : "10.4.0-66861",
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "exemplar" : false,
               "expr" : "(slurmjob_info{jobid=\"$jobid\"})",
               "instant" : false,
               "legendFormat" : "{{batchflag}}",
               "range" : true,
               "refId" : "A"
            }
         ],
         "title" : "Job Type",
         "transformations" : [
            {
               "id" : "labelsToFields",
               "options" : {
                  "keepLabels" : [
                     "batchflag"
                  ],
                  "valueLabel" : "__name__"
               }
            },
            {
               "id" : "merge",
               "options" : {}
            }
         ],
         "type" : "stat"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "color" : {
                  "mode" : "thresholds"
               },
               "mappings" : [],
               "thresholds" : {
                  "mode" : "absolute",
                  "steps" : [
                     {
                        "color" : "green",
                        "value" : null
                     }
                  ]
               }
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 3,
            "w" : 2,
            "x" : 10,
            "y" : 1
         },
         "id" : 12,
         "options" : {
            "colorMode" : "value",
            "graphMode" : "area",
            "justifyMode" : "auto",
            "orientation" : "auto",
            "reduceOptions" : {
               "calcs" : [
                  "lastNotNull"
               ],
               "fields" : "/^nodes$/",
               "values" : false
            },
            "showPercentChange" : false,
            "text" : {
               "valueSize" : 32
            },
            "textMode" : "auto",
            "wideLayout" : true
         },
         "pluginVersion" : "10.4.0-66861",
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "expr" : "slurmjob_info{jobid=\"$jobid\"}",
               "instant" : false,
               "legendFormat" : "__auto",
               "range" : true,
               "refId" : "A"
            }
         ],
         "title" : "# Nodes",
         "transformations" : [
            {
               "id" : "labelsToFields",
               "options" : {
                  "keepLabels" : [
                     "__name__",
                     "jobid",
                     "nodes",
                     "partition",
                     "user"
                  ]
               }
            },
            {
               "id" : "merge",
               "options" : {}
            }
         ],
         "type" : "stat"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "color" : {
                  "mode" : "thresholds"
               },
               "mappings" : [],
               "thresholds" : {
                  "mode" : "absolute",
                  "steps" : [
                     {
                        "color" : "green",
                        "value" : null
                     }
                  ]
               }
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 3,
            "w" : 4,
            "x" : 12,
            "y" : 1
         },
         "id" : 11,
         "options" : {
            "colorMode" : "value",
            "graphMode" : "area",
            "justifyMode" : "auto",
            "orientation" : "auto",
            "reduceOptions" : {
               "calcs" : [
                  "lastNotNull"
               ],
               "fields" : "/^partition$/",
               "values" : false
            },
            "showPercentChange" : false,
            "text" : {
               "valueSize" : 30
            },
            "textMode" : "auto",
            "wideLayout" : true
         },
         "pluginVersion" : "10.4.0-66861",
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "exemplar" : false,
               "expr" : "slurmjob_info{jobid=\"$jobid\"}",
               "instant" : false,
               "legendFormat" : "__auto",
               "range" : true,
               "refId" : "A"
            }
         ],
         "title" : "Partition",
         "transformations" : [
            {
               "id" : "labelsToFields",
               "options" : {
                  "keepLabels" : [
                     "__name__",
                     "jobid",
                     "partition",
                     "user"
                  ]
               }
            },
            {
               "id" : "merge",
               "options" : {}
            }
         ],
         "type" : "stat"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "color" : {
                  "mode" : "thresholds"
               },
               "decimals" : 0,
               "mappings" : [],
               "thresholds" : {
                  "mode" : "absolute",
                  "steps" : [
                     {
                        "color" : "red",
                        "value" : null
                     },
                     {
                        "color" : "#EAB839",
                        "value" : 33.33
                     },
                     {
                        "color" : "green",
                        "value" : 66.66
                     }
                  ]
               },
               "unit" : "percent"
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 3,
            "w" : 5,
            "x" : 16,
            "y" : 1
         },
         "id" : 32,
         "options" : {
            "minVizHeight" : 75,
            "minVizWidth" : 75,
            "orientation" : "auto",
            "reduceOptions" : {
               "calcs" : [
                  "mean"
               ],
               "fields" : "",
               "values" : false
            },
            "showThresholdLabels" : false,
            "showThresholdMarkers" : false,
            "sizing" : "auto"
         },
         "pluginVersion" : "10.4.0-66861",
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "expr" : "avg(avg(label_replace({__name__=~\"card(.*)_rocm_utilization\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_utilization\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card))",
               "instant" : false,
               "legendFormat" : "GPU Core",
               "range" : true,
               "refId" : "A"
            },
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "expr" : "avg(100 * avg(label_replace({__name__=~\"card(.*)_rocm_vram_used\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_vram_used\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card) / avg(label_replace({__name__=~\"card(.*)_rocm_vram_total\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_vram_total\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card))",
               "hide" : false,
               "instant" : false,
               "legendFormat" : "GPU Memory",
               "range" : true,
               "refId" : "B"
            },
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "expr" : "avg(100 * avg(label_replace({__name__=~\"card(.*)_rocm_avg_pwr\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_avg_pwr\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card) / 300)",
               "hide" : false,
               "instant" : false,
               "legendFormat" : "GPU Power",
               "range" : true,
               "refId" : "C"
            }
         ],
         "title" : "Utilization Summary",
         "type" : "gauge"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "color" : {
                  "mode" : "thresholds"
               },
               "mappings" : [],
               "thresholds" : {
                  "mode" : "absolute",
                  "steps" : [
                     {
                        "color" : "green",
                        "value" : null
                     }
                  ]
               },
               "unit" : "dthms"
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 3,
            "w" : 3,
            "x" : 21,
            "y" : 1
         },
         "id" : 39,
         "options" : {
            "colorMode" : "value",
            "graphMode" : "none",
            "justifyMode" : "auto",
            "orientation" : "auto",
            "reduceOptions" : {
               "calcs" : [
                  "range"
               ],
               "fields" : "",
               "values" : false
            },
            "showPercentChange" : false,
            "text" : {
               "valueSize" : 30
            },
            "textMode" : "auto",
            "wideLayout" : true
         },
         "pluginVersion" : "10.4.0-66861",
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "expr" : "max(timestamp(slurmjob_info{jobid=\"$jobid\"}))",
               "hide" : false,
               "instant" : false,
               "interval" : "",
               "legendFormat" : "__auto",
               "range" : true,
               "refId" : "A"
            }
         ],
         "title" : "SLURM Job Duration",
         "type" : "stat"
      },
      {
         "collapsed" : false,
         "gridPos" : {
            "h" : 1,
            "w" : 24,
            "x" : 0,
            "y" : 4
         },
         "id" : 15,
         "panels" : [],
         "title" : "GPU Usage Summary",
         "type" : "row"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "color" : {
                  "mode" : "thresholds"
               },
               "decimals" : 2,
               "mappings" : [],
               "thresholds" : {
                  "mode" : "absolute",
                  "steps" : [
                     {
                        "color" : "red",
                        "value" : null
                     },
                     {
                        "color" : "#EAB839",
                        "value" : 25
                     },
                     {
                        "color" : "green",
                        "value" : 75
                     }
                  ]
               },
               "unit" : "percent"
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 8,
            "w" : 9,
            "x" : 0,
            "y" : 5
         },
         "id" : 28,
         "interval": "$interval",
         "options" : {
            "minVizHeight" : 75,
            "minVizWidth" : 75,
            "orientation" : "auto",
            "reduceOptions" : {
               "calcs" : [
                  "mean"
               ],
               "fields" : "",
               "values" : false
            },
            "showThresholdLabels" : false,
            "showThresholdMarkers" : true,
            "sizing" : "auto"
         },
         "pluginVersion" : "10.4.0-66861",
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "exemplar" : false,
               "expr" : "avg(label_replace({__name__=~\"card(.*)_rocm_utilization\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_utilization\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card)",
               "instant" : false,
               "legendFormat" : "Card: {{card}}",
               "range" : true,
               "refId" : "A"
            }
         ],
         "title" : "Mean GPU Utilization (%)",
         "type" : "gauge"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "custom" : {
                  "hideFrom" : {
                     "legend" : false,
                     "tooltip" : false,
                     "viz" : false
                  },
                  "scaleDistribution" : {
                     "type" : "linear"
                  }
               }
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 8,
            "w" : 15,
            "x" : 9,
            "y" : 5
         },
         "id" : 27,
         "interval": "$interval",
         "options" : {
            "calculate" : false,
            "calculation" : {
               "xBuckets" : {
                  "mode" : "count"
               },
               "yBuckets" : {
                  "mode" : "size",
                  "scale" : {
                     "type" : "linear"
                  }
               }
            },
            "cellGap" : 1,
            "cellValues" : {
               "unit" : "percent"
            },
            "color" : {
               "exponent" : 0.5,
               "fill" : "dark-orange",
               "max" : 100,
               "min" : 0,
               "mode" : "scheme",
               "reverse" : true,
               "scale" : "exponential",
               "scheme" : "RdYlGn",
               "steps" : 64
            },
            "exemplars" : {
               "color" : "rgba(255,0,255,0.7)"
            },
            "filterValues" : {
               "le" : -10
            },
            "legend" : {
               "show" : true
            },
            "rowsFrame" : {
               "layout" : "auto"
            },
            "tooltip" : {
               "mode" : "single",
               "showColorScale" : false,
               "yHistogram" : false
            },
            "yAxis" : {
               "axisLabel" : "Card",
               "axisPlacement" : "left",
               "reverse" : false
            }
         },
         "pluginVersion" : "10.4.0-66861",
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "exemplar" : false,
               "expr" : "avg(label_replace({__name__=~\"card(.*)_rocm_utilization\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_utilization\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card)",
               "format" : "time_series",
               "instant" : false,
               "interval" : "",
               "legendFormat" : "{{card}}",
               "range" : true,
               "refId" : "A"
            }
         ],
         "title" : "GPU Utilization Heatmap",
         "type" : "heatmap"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "color" : {
                  "mode" : "thresholds"
               },
               "decimals" : 2,
               "mappings" : [],
               "thresholds" : {
                  "mode" : "percentage",
                  "steps" : [
                     {
                        "color" : "red",
                        "value" : null
                     },
                     {
                        "color" : "#EAB839",
                        "value" : 25
                     },
                     {
                        "color" : "green",
                        "value" : 50
                     }
                  ]
               },
               "unit" : "percent"
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 8,
            "w" : 9,
            "x" : 0,
            "y" : 13
         },
         "id" : 29,
         "interval": "$interval",
         "options" : {
            "minVizHeight" : 75,
            "minVizWidth" : 75,
            "orientation" : "auto",
            "reduceOptions" : {
               "calcs" : [
                  "mean"
               ],
               "fields" : "",
               "values" : false
            },
            "showThresholdLabels" : false,
            "showThresholdMarkers" : true,
            "sizing" : "auto"
         },
         "pluginVersion" : "10.4.0-66861",
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "exemplar" : false,
               "expr" : "100 * max(label_replace({__name__=~\"card(.*)_rocm_vram_used\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_vram_used\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card) / max(label_replace({__name__=~\"card(.*)_rocm_vram_total\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_vram_total\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card)",
               "instant" : false,
               "legendFormat" : "Card: {{card}}",
               "range" : true,
               "refId" : "A"
            }
         ],
         "title" : "Max GPU Memory Utilization (%)",
         "type" : "gauge"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "custom" : {
                  "hideFrom" : {
                     "legend" : false,
                     "tooltip" : false,
                     "viz" : false
                  },
                  "scaleDistribution" : {
                     "type" : "linear"
                  }
               }
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 8,
            "w" : 15,
            "x" : 9,
            "y" : 13
         },
         "id" : 31,
         "interval": "$interval",
         "options" : {
            "calculate" : false,
            "calculation" : {
               "xBuckets" : {
                  "mode" : "count"
               },
               "yBuckets" : {
                  "mode" : "size",
                  "scale" : {
                     "type" : "linear"
                  }
               }
            },
            "cellGap" : 1,
            "cellValues" : {
               "unit" : "percent"
            },
            "color" : {
               "exponent" : 0.5,
               "fill" : "dark-orange",
               "max" : 100,
               "min" : 0,
               "mode" : "scheme",
               "reverse" : true,
               "scale" : "exponential",
               "scheme" : "RdYlGn",
               "steps" : 64
            },
            "exemplars" : {
               "color" : "rgba(255,0,255,0.7)"
            },
            "filterValues" : {
               "le" : 1e-09
            },
            "legend" : {
               "show" : true
            },
            "rowsFrame" : {
               "layout" : "auto"
            },
            "tooltip" : {
               "mode" : "single",
               "showColorScale" : false,
               "yHistogram" : false
            },
            "yAxis" : {
               "axisLabel" : "Card",
               "axisPlacement" : "left",
               "reverse" : false
            }
         },
         "pluginVersion" : "10.4.0-66861",
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "exemplar" : false,
               "expr" : "100 * avg(label_replace({__name__=~\"card(.*)_rocm_vram_used\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_vram_used\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card) / max(label_replace({__name__=~\"card(.*)_rocm_vram_total\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_vram_total\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card)",
               "format" : "time_series",
               "instant" : false,
               "interval" : "",
               "legendFormat" : "{{card}}",
               "range" : true,
               "refId" : "A"
            }
         ],
         "title" : "GPU Memory Utilization Heatmap",
         "type" : "heatmap"
      },
      {
         "collapsed" : false,
         "gridPos" : {
            "h" : 1,
            "w" : 24,
            "x" : 0,
            "y" : 22
         },
         "id" : 21,
         "panels" : [],
         "title" : "Additional GPU telemetry: Utilization, Temperature, Power and Frequency",
         "type" : "row"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "color" : {
                  "mode" : "palette-classic"
               },
               "custom" : {
                  "axisBorderShow" : false,
                  "axisCenteredZero" : false,
                  "axisColorMode" : "text",
                  "axisLabel" : "",
                  "axisPlacement" : "auto",
                  "barAlignment" : 0,
                  "drawStyle" : "line",
                  "fillOpacity" : 0,
                  "gradientMode" : "none",
                  "hideFrom" : {
                     "legend" : false,
                     "tooltip" : false,
                     "viz" : false
                  },
                  "insertNulls" : false,
                  "lineInterpolation" : "linear",
                  "lineWidth" : 1,
                  "pointSize" : 5,
                  "scaleDistribution" : {
                     "type" : "linear"
                  },
                  "showPoints" : "auto",
                  "spanNulls" : false,
                  "stacking" : {
                     "group" : "A",
                     "mode" : "none"
                  },
                  "thresholdsStyle" : {
                     "mode" : "off"
                  }
               },
               "mappings" : [],
               "thresholds" : {
                  "mode" : "absolute",
                  "steps" : [
                     {
                        "color" : "green",
                        "value" : null
                     },
                     {
                        "color" : "red",
                        "value" : 80
                     }
                  ]
               },
               "unit" : "percent"
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 8,
            "w" : 24,
            "x" : 0,
            "y" : 23
         },
         "id" : 24,
         "interval": "$interval",
         "options" : {
            "legend" : {
               "calcs" : [],
               "displayMode" : "list",
               "placement" : "bottom",
               "showLegend" : true
            },
            "tooltip" : {
               "mode" : "single",
               "sort" : "none"
            }
         },
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "expr" : "avg(label_replace({__name__=~\"card(.*)_rocm_utilization\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_utilization\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card)",
               "instant" : false,
               "legendFormat" : "Card: {{card}}",
               "range" : true,
               "refId" : "A"
            }
         ],
         "title" : "GPU Utilization (%)",
         "type" : "timeseries"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "color" : {
                  "mode" : "palette-classic"
               },
               "custom" : {
                  "axisBorderShow" : false,
                  "axisCenteredZero" : false,
                  "axisColorMode" : "text",
                  "axisLabel" : "",
                  "axisPlacement" : "auto",
                  "barAlignment" : 0,
                  "drawStyle" : "line",
                  "fillOpacity" : 0,
                  "gradientMode" : "none",
                  "hideFrom" : {
                     "legend" : false,
                     "tooltip" : false,
                     "viz" : false
                  },
                  "insertNulls" : false,
                  "lineInterpolation" : "linear",
                  "lineWidth" : 1,
                  "pointSize" : 5,
                  "scaleDistribution" : {
                     "type" : "linear"
                  },
                  "showPoints" : "auto",
                  "spanNulls" : false,
                  "stacking" : {
                     "group" : "A",
                     "mode" : "none"
                  },
                  "thresholdsStyle" : {
                     "mode" : "off"
                  }
               },
               "mappings" : [],
               "thresholds" : {
                  "mode" : "absolute",
                  "steps" : [
                     {
                        "color" : "green"
                     },
                     {
                        "color" : "red",
                        "value" : 80
                     }
                  ]
               },
               "unit" : "celsius"
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 8,
            "w" : 24,
            "x" : 0,
            "y" : 31
         },
         "id" : 33,
         "options" : {
            "legend" : {
               "calcs" : [],
               "displayMode" : "list",
               "placement" : "bottom",
               "showLegend" : true
            },
            "tooltip" : {
               "mode" : "single",
               "sort" : "none"
            }
         },
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "expr" : "avg(label_replace({__name__=~\"card(.*)_rocm_temp_die_edge\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_temp_die_edge\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card)",
               "instant" : false,
               "legendFormat" : "Card: {{card}}",
               "range" : true,
               "refId" : "A"
            }
         ],
         "title" : "GPU Temperature - Die Edge (Â°C)",
         "type" : "timeseries"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "color" : {
                  "mode" : "palette-classic"
               },
               "custom" : {
                  "axisBorderShow" : false,
                  "axisCenteredZero" : false,
                  "axisColorMode" : "text",
                  "axisLabel" : "",
                  "axisPlacement" : "auto",
                  "barAlignment" : 0,
                  "drawStyle" : "line",
                  "fillOpacity" : 0,
                  "gradientMode" : "none",
                  "hideFrom" : {
                     "legend" : false,
                     "tooltip" : false,
                     "viz" : false
                  },
                  "insertNulls" : false,
                  "lineInterpolation" : "linear",
                  "lineWidth" : 1,
                  "pointSize" : 5,
                  "scaleDistribution" : {
                     "type" : "linear"
                  },
                  "showPoints" : "auto",
                  "spanNulls" : false,
                  "stacking" : {
                     "group" : "A",
                     "mode" : "none"
                  },
                  "thresholdsStyle" : {
                     "mode" : "off"
                  }
               },
               "mappings" : [],
               "thresholds" : {
                  "mode" : "absolute",
                  "steps" : [
                     {
                        "color" : "green"
                     },
                     {
                        "color" : "red",
                        "value" : 80
                     }
                  ]
               },
               "unit" : "watt"
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 8,
            "w" : 12,
            "x" : 0,
            "y" : 39
         },
         "id" : 22,
         "interval": "$interval",
         "options" : {
            "legend" : {
               "calcs" : [],
               "displayMode" : "list",
               "placement" : "bottom",
               "showLegend" : true
            },
            "tooltip" : {
               "mode" : "single",
               "sort" : "none"
            }
         },
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "expr" : "avg(label_replace({__name__=~\"card(.*)_rocm_avg_pwr\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_avg_pwr\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card)",
               "instant" : false,
               "legendFormat" : "Card: {{card}}",
               "range" : true,
               "refId" : "A"
            }
         ],
         "title" : "GPU Power (W)",
         "type" : "timeseries"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "custom" : {
                  "hideFrom" : {
                     "legend" : false,
                     "tooltip" : false,
                     "viz" : false
                  },
                  "scaleDistribution" : {
                     "type" : "linear"
                  }
               }
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 8,
            "w" : 12,
            "x" : 12,
            "y" : 39
         },
         "id" : 34,
         "interval": "$interval",
         "options" : {
            "calculate" : false,
            "calculation" : {
               "xBuckets" : {
                  "mode" : "count"
               },
               "yBuckets" : {
                  "mode" : "size",
                  "scale" : {
                     "type" : "linear"
                  }
               }
            },
            "cellGap" : 1,
            "cellValues" : {
               "unit" : "percent"
            },
            "color" : {
               "exponent" : 0.5,
               "fill" : "dark-orange",
               "max" : 100,
               "min" : 0,
               "mode" : "scheme",
               "reverse" : false,
               "scale" : "exponential",
               "scheme" : "RdYlGn",
               "steps" : 64
            },
            "exemplars" : {
               "color" : "rgba(255,0,255,0.7)"
            },
            "filterValues" : {
               "le" : 1e-09
            },
            "legend" : {
               "show" : true
            },
            "rowsFrame" : {
               "layout" : "auto"
            },
            "tooltip" : {
               "show" : true,
               "yHistogram" : false
            },
            "yAxis" : {
               "axisLabel" : "Card",
               "axisPlacement" : "left",
               "reverse" : false
            }
         },
         "pluginVersion" : "10.3.0-62488",
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "exemplar" : false,
               "expr" : "100 * avg(label_replace({__name__=~\"card(.*)_rocm_avg_pwr\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_avg_pwr\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card) / 300",
               "format" : "time_series",
               "instant" : false,
               "interval" : "",
               "legendFormat" : "{{card}}",
               "range" : true,
               "refId" : "A"
            }
         ],
         "title" : "Heatmap of GPU Power (%)",
         "type" : "heatmap"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "color" : {
                  "mode" : "palette-classic"
               },
               "custom" : {
                  "axisBorderShow" : false,
                  "axisCenteredZero" : false,
                  "axisColorMode" : "text",
                  "axisLabel" : "",
                  "axisPlacement" : "auto",
                  "barAlignment" : 0,
                  "drawStyle" : "line",
                  "fillOpacity" : 0,
                  "gradientMode" : "none",
                  "hideFrom" : {
                     "legend" : false,
                     "tooltip" : false,
                     "viz" : false
                  },
                  "insertNulls" : false,
                  "lineInterpolation" : "linear",
                  "lineWidth" : 1,
                  "pointSize" : 5,
                  "scaleDistribution" : {
                     "type" : "linear"
                  },
                  "showPoints" : "auto",
                  "spanNulls" : false,
                  "stacking" : {
                     "group" : "A",
                     "mode" : "none"
                  },
                  "thresholdsStyle" : {
                     "mode" : "off"
                  }
               },
               "mappings" : [],
               "thresholds" : {
                  "mode" : "absolute",
                  "steps" : [
                     {
                        "color" : "green"
                     },
                     {
                        "color" : "red",
                        "value" : 80
                     }
                  ]
               },
               "unit" : "rotmhz"
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 8,
            "w" : 12,
            "x" : 0,
            "y" : 47
         },
         "id" : 25,
         "interval": "$interval",
         "options" : {
            "legend" : {
               "calcs" : [],
               "displayMode" : "list",
               "placement" : "bottom",
               "showLegend" : true
            },
            "tooltip" : {
               "mode" : "single",
               "sort" : "none"
            }
         },
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "expr" : "avg(label_replace({__name__=~\"card(.*)_rocm_sclk_clock_mhz\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_sclk_clock_mhz\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card)",
               "instant" : false,
               "legendFormat" : "Card: {{card}}",
               "range" : true,
               "refId" : "A"
            }
         ],
         "title" : "GPU Frequency - Engine Clock (MHz)",
         "type" : "timeseries"
      },
      {
         "datasource" : {
            "type" : "prometheus",
            "uid" : "prometheus"
         },
         "fieldConfig" : {
            "defaults" : {
               "color" : {
                  "mode" : "palette-classic"
               },
               "custom" : {
                  "axisBorderShow" : false,
                  "axisCenteredZero" : false,
                  "axisColorMode" : "text",
                  "axisLabel" : "",
                  "axisPlacement" : "auto",
                  "barAlignment" : 0,
                  "drawStyle" : "line",
                  "fillOpacity" : 0,
                  "gradientMode" : "none",
                  "hideFrom" : {
                     "legend" : false,
                     "tooltip" : false,
                     "viz" : false
                  },
                  "insertNulls" : false,
                  "lineInterpolation" : "linear",
                  "lineWidth" : 1,
                  "pointSize" : 5,
                  "scaleDistribution" : {
                     "type" : "linear"
                  },
                  "showPoints" : "auto",
                  "spanNulls" : false,
                  "stacking" : {
                     "group" : "A",
                     "mode" : "none"
                  },
                  "thresholdsStyle" : {
                     "mode" : "off"
                  }
               },
               "mappings" : [],
               "thresholds" : {
                  "mode" : "absolute",
                  "steps" : [
                     {
                        "color" : "green"
                     },
                     {
                        "color" : "red",
                        "value" : 80
                     }
                  ]
               },
               "unit" : "rotmhz"
            },
            "overrides" : []
         },
         "gridPos" : {
            "h" : 8,
            "w" : 12,
            "x" : 12,
            "y" : 47
         },
         "id" : 23,
         "interval": "$interval",
         "options" : {
            "legend" : {
               "calcs" : [],
               "displayMode" : "list",
               "placement" : "bottom",
               "showLegend" : true
            },
            "tooltip" : {
               "mode" : "single",
               "sort" : "none"
            }
         },
         "targets" : [
            {
               "datasource" : {
                  "type" : "prometheus",
                  "uid" : "prometheus"
               },
               "editorMode" : "code",
               "expr" : "avg(label_replace({__name__=~\"card(.*)_rocm_mclk_clock_mhz\"}, \"card\", \"$1\", \"__name__\", \"card(.*)_rocm_mclk_clock_mhz\") * on (instance) group_left() slurmjob_info{jobid=\"$jobid\"}) by (card)",
               "instant" : false,
               "legendFormat" : "Card: {{card}}",
               "range" : true,
               "refId" : "A"
            }
         ],
         "title" : "GPU Frequency - Memory Clock (MHz)",
         "type" : "timeseries"
      }
   ],
   "refresh" : "",
   "schemaVersion" : 39,
   "tags" : [
      "omniwatch"
   ],
   "templating" : {
      "list" : [
         {
            "hide" : 2,
            "includeAll" : false,
            "label" : "SLURM Job ID",
            "multi" : false,
            "name" : "jobid",
            "options" : [],
            "query" : "",
            "skipUrlSync" : false,
            "type" : "custom"
         },
         {
            "current" : {
               "selected" : true,
               "text" : "5s",
               "value" : "5s"
            },
            "hide" : 0,
            "includeAll" : false,
            "label" : "Interval",
            "multi" : false,
            "name" : "interval",
            "options" : [
               {
                  "selected" : false,
                  "text" : "60s",
                  "value" : "60s"
               },
               {
                  "selected" : false,
                  "text" : "30s",
                  "value" : "30s"
               },
               {
                  "selected" : true,
                  "text" : "5s",
                  "value" : "5s"
               }
            ],
            "query" : "60s,30s,5s",
            "queryValue" : "",
            "skipUrlSync" : false,
            "type" : "custom"
         }
      ]
   },
   "time" : {
      "from" : "now-6h",
      "to" : "now"
   },
   "timepicker" : {
      "hidden" : true
   },
   "timezone" : "",
   "title" : "omniwatch-job",
   "uid" : "bccbab2a-b53a-4d32-90e7-b7613b67403c",
   "version" : 63,
   "weekStart" : ""
}
